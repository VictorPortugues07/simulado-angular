<app-nav-bar></app-nav-bar>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-8">
      <div class="my-3">
        <input
          type="text"
          class="form-control"
          placeholder="Buscar jogador..."
          [(ngModel)]="textoBusca"
        />
      </div>

      <div class="mb-3">
        @for (posicao of posicoes; track posicao) {
        <div class="form-check form-check-inline">
          <input
            class="form-check-input"
            type="checkbox"
            [id]="posicao"
            [checked]="posicoesSelecionadas.includes(posicao)"
            (change)="togglePosicao(posicao)"
          />
          <label class="form-check-label" [for]="posicao">
            {{ posicao }}
          </label>
        </div>
        }
      </div>

      <div class="row">
        @for (jogador of buscarJogadores(); track jogador.nome) {
        <div class="col-md-4 mb-3">
          <app-card
            [nome]="jogador.nome"
            [idade]="jogador.idade"
            [posicao]="jogador.posicao"
            [numero]="jogador.numero"
            [imagem]="jogador.imagem"
            (escalar)="escalarJogador(jogador)"
          >
          </app-card>
        </div>
        } @if (buscarJogadores().length === 0) {
        <div class="col-12">
          <p class="text-center text-muted">Nenhum jogador encontrado</p>
        </div>
        }
      </div>
    </div>

    <div class="col-md-4">
      <div class="card mt-3">
        <div class="card-header bg-primary text-white">
          <h5>Escalados</h5>
        </div>
        <div class="card-body">
          @if (jogadoresEscalados.length > 0) {
          <table class="table">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Pos</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              @for (jogador of jogadoresEscalados; track jogador.nome) {
              <tr>
                <td>{{ jogador.nome }}</td>
                <td>{{ jogador.posicao }}</td>
                <td>
                  <button
                    class="btn btn-danger btn-sm"
                    (click)="removerJogador(jogador)"
                  >
                    X
                  </button>
                </td>
              </tr>
              }
            </tbody>
          </table>
          <p><strong>Total:</strong> {{ jogadoresEscalados.length }}</p>
          } @else {
          <p class="text-center text-muted">Lista vazia</p>
          }
        </div>
      </div>
    </div>
  </div>
</div>

<router-outlet />
